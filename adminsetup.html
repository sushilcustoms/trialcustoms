<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Homepage</title>
  <link rel="stylesheet" href="styles.css">
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {packages:["orgchart"]});
        google.charts.setOnLoadCallback(drawChart);

        let expandedNodes = new Set();

        function drawChart() {
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Name');
            data.addColumn('string', 'Manager');
            data.addColumn('string', 'ToolTip');

            let rows = [
                [{'v':'Ministry of Finance', 'f':'Ministry of Finance'}, '', 'Top-Level Authority'],
                [{'v':'Department of Revenue', 'f':'Department of Revenue'}, 'Ministry of Finance', 'Handles revenue policies'],
                [{'v':'CBIC', 'f':'Central Board of Indirect Taxes & Customs'}, 'Department of Revenue', 'Regulates Customs & GST'],
                [{'v':'Chief Commissioner Bhopal Zone', 'f':'Chief Commissioner Bhopal Zone'}, 'CBIC', 'Oversees Bhopal Zone'],
                [{'v':'Customs Indore', 'f':'Customs Indore'}, 'Chief Commissioner Bhopal Zone', 'Indore Customs Administration'],
                
                [{'v':'ICD', 'f':'<div class="clickable" onclick="toggleNode(\'ICD\')">ICD</div>'}, 'Customs Indore', 'Inland Container Depot'],
                [{'v':'Circle', 'f':'<div class="clickable" onclick="toggleNode(\'Circle\')">Circle</div>'}, 'Customs Indore', 'Regulatory Divisions'],
                [{'v':'Airport', 'f':'<div class="clickable" onclick="toggleNode(\'Airport\')">Airport</div>'}, 'Customs Indore', 'Airport Customs'],
                [{'v':'FPO', 'f':'<div class="clickable" onclick="toggleNode(\'FPO\')">FPO</div>'}, 'Customs Indore', 'Foreign Post Office'],
                [{'v':'SEZ', 'f':'<div class="clickable" onclick="toggleNode(\'SEZ\')">SEZ</div>'}, '', 'Special Economic Zone']
            ];

            if (expandedNodes.has('ICD')) {
                rows.push(...[
                    [{'v':'ICD_Tihi', 'f':'Tihi'}, 'ICD', ''],
                    [{'v':'ICD_Dhannad', 'f':'Dhannad'}, 'ICD', ''],
                    [{'v':'ICD_Malanpur', 'f':'Malanpur'}, 'ICD', ''],
                    [{'v':'ICD_Mandideep', 'f':'Mandideep'}, 'ICD', ''],
                    [{'v':'ICD_Raipur', 'f':'Raipur'}, 'ICD', ''],
                    [{'v':'ICD_Kheda', 'f':'Kheda'}, 'ICD', ''],
                    [{'v':'ICD_Powerkheda', 'f':'Powerkheda'}, 'ICD', '']
                ]);
            }
            if (expandedNodes.has('Circle')) {
                rows.push(...[
                    [{'v':'Circle_Bhopal', 'f':'Bhopal'}, 'Circle', ''],
                    [{'v':'Circle_Indore', 'f':'Indore'}, 'Circle', ''],
                    [{'v':'Circle_Ujjain', 'f':'Ujjain'}, 'Circle', ''],
                    [{'v':'Circle_Jabalpur', 'f':'Jabalpur'}, 'Circle', ''],
                    [{'v':'Circle_Raipur', 'f':'Raipur'}, 'Circle', '']
                ]);
            }
            if (expandedNodes.has('Airport')) {
                rows.push(...[
                    [{'v':'Airport_Indore', 'f':'Indore'}, 'Airport', ''],
                    [{'v':'Airport_Bhopal', 'f':'Bhopal'}, 'Airport', ''],
                    [{'v':'Airport_Chhatarpur', 'f':'Chhatarpur'}, 'Airport', '']
                ]);
            }
            if (expandedNodes.has('FPO')) {
                rows.push(...[
                    [{'v':'FPO_Raipur', 'f':'Raipur'}, 'FPO', ''],
                    [{'v':'FPO_Bhopal', 'f':'Bhopal'}, 'FPO', '']
                ]);
            }
            if (expandedNodes.has('SEZ')) {
                rows.push(...[
                    [{'v':'SEZ_A', 'f':'Pithampur, Dhar(Multi-Product)'}, 'SEZ', ''],
                    [{'v':'SEZ_B', 'f':'Indore (5) ITES Units'}, 'SEZ', '']
                ]);
            }

            data.addRows(rows);
            var chart = new google.visualization.OrgChart(document.getElementById('orgchart'));
            chart.draw(data, {'allowHtml':true});
        }

        function toggleNode(node) {
            if (expandedNodes.has(node)) {
                expandedNodes.delete(node);
            } else {
                expandedNodes.add(node);
            }
            drawChart();
        }
    </script>
    <style>
.right-body {
    display: flex;
    flex-direction: column; /* Keep elements stacked */
    align-items: center; /* Center align elements */
    justify-content: flex-start;
    height: 110vh; /* Full height to prevent shifts */
    overflow: hidden; /* Prevents layout shifts */
}

#orgchart {
    flex-grow: 1; /* Allows the chart to expand without pushing content */
    overflow: auto; /* Enables scrolling if content expands */
    max-height: 600px; /* Limit chart height */
    display: flex;
    justify-content: center;
}

iframe {
    flex-shrink: 0; /* Prevents video from resizing or moving */
}
.right-body h2 {
    width: 100%; /* Ensure heading stays full width */
    text-align: center;
}

body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
     }

.clickable {
            cursor: pointer;
            color: blue;
            text-decoration: underline;
}
h2 {
            color: darkblue ;
}
    </style>

</head>
<body>
  <div class="webpage-container">
    <!-- Load Upper Header -->
    <div id="upper-header-placeholder"></div>
    <!-- Load Lower Header -->
    <div id="lower-header-placeholder"></div>
    <!-- Load Marquee Section -->
    <div id="marquee-placeholder"></div>
    <!-- ===== Main Content Area ===== -->
    <div class="container">
    <!-- Load Sidebar -->
    <div id="sidebar-placeholder"></div>
    <div class="right-body">
       
        <h2>Customs Indore Administrative Setup</h2>
        <iframe width="600" height="340" src="documents/Flowchart.mp4" frameborder="0" allowfullscreen></iframe>
        <h2>Flowchart of Customs Indore Administrative Setup</h2>
        <div id="orgchart"></div>
      
    </div>
  </div>
  <!-- <video width="600" controls>
    <source src="documents/Flowchart.mp4" type="video/mp4">
    Your browser does not support the video tag. -->
  <!-- </video> -->
  
    <!-- Load Footer -->
    <div id="footer-placeholder"></div>
  </div>

  <!-- Include external JavaScript file -->
  <script src="scripts.js"></script>
  <script>
    // Function to load external HTML into a placeholder
    function loadHTML(url, placeholderId, callback) {
      fetch(url)
        .then(response => response.text())
        .then(data => {
          document.getElementById(placeholderId).innerHTML = data;
          if (callback) callback();
        })
        .catch(error => console.error('Error loading HTML:', error));
    }
    // Load upper-header, lower-header, marquee, footer, and sidebar
    loadHTML('partials/upperheader.html', 'upper-header-placeholder');
    loadHTML('partials/lowerheader.html', 'lower-header-placeholder', addDropdownListeners);
    loadHTML('partials/footer.html', 'footer-placeholder');
    loadHTML('partials/sidebar.html', 'sidebar-placeholder');
    loadHTML('partials/marquee.html', 'marquee-placeholder');
  </script>
</body>
</html>